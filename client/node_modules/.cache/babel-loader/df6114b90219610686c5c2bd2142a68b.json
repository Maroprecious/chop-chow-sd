{"ast":null,"code":"var _jsxFileName = \"/home/chuka/joe/ChopChowSD/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport Header from \"./components/Header/Header\";\nimport Footer from \"./components/Footer\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport HomePage from \"./components/HomePage\";\nimport MealsPage from \"./components/mealsPage/MealsPage\";\nimport VSMealsPage from \"./components/vsm2/VSMealsPage\";\nimport ProductsSection from \"./components/productsPage/ProductsPage\";\nimport Login from \"./components/Login\";\nimport GroceryPage from \"./components/GroceryPage\"; // import ProductFullDetail from \"./components/ProductFullDetail/ProductFullDetail\";\n\nimport SignUp from \"./components/signup\";\nimport ForgotPassword from \"./components/forgotpassword\";\nimport ResetPassword from \"./components/resetpassword\";\nimport SuggestMeal from \"./components/SuggestMeal\";\nimport SuggestProduct from \"./components/SuggestProduct\";\nimport ViewSuggestedMeals from \"./components/ViewSuggestedMeals\";\nimport AdminPanel from \"./components/AdminPanel/AdminPanel\";\nimport { setInitUrl, getUser } from \"./actions\";\nimport { connect } from 'react-redux';\nimport axios from './util/Api';\n\nrequire(\"dotenv\").config();\n\nclass App extends Component {\n  // productDisplayBooleansOutOfState = [];\n  constructor(props) {\n    super(props);\n    this.allMealNames = [];\n    this.productNames = [\"Spinach\", \"Brown Beans\", \"Ijebu Garri\", \"Honey Beans\", \"Kale\", \"Water\", \"Squash Potatoes\", \"Oregano\", \"Cashews\", \"Palm Oil\", \"Pineapple\", \"Onions\", \"Flour\", \"Butter\", \"Sugar\", \"Hawaiian Bread\", \"Avocados\", \"Tomatoes\"];\n    this.productImageLink = [];\n    this.categories = [\"Baking\", \"Cooking\", \"Home\", \"Ethiopian\", \"Quick-Meal\"];\n    this.measurements = [\"mL\", \"oz\", \"L\", \"cup(s)\", \"Tbsp\", \"tsp\", \"pt\", \"lb\", \"g\", \"kg\", \"lb\", \"qt\", \"gallon\", \"dash/pinch\", \"Leaves\", \"cloves\", \"cubes\", \"Large\", \"medium\", \"small\"];\n    this.kitchenUtensils = [\"Baking Sheet\", \"Colander\", \"Cooking Oil\", \"Cutting Board\", \"Fridge\", \"Knife Set\", \"Mixing Bowls\", \"Pot\", \"Pan\", \"Peeler\", \"Thermometer\", \"Wire Mesh\", \"Zester\"];\n    this.availableLocations = [\"African Carribean Market\", \"Abule\", \"Scotch Bonnet Restaurant\", \"Ralphs\", \"Target\", \"Walmart\", \"Vons\"];\n    this.groceryList = [];\n    this.locationAddressComponent = [];\n    this.handleLogout = this.handleLogout.bind(this);\n    this.state = {\n      suggestMealPopOver: false,\n      isAuthenticated: false,\n      customerId: null\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.token) {\n      axios.defaults.headers.common['Authorization'] = \"Bearer \" + nextProps.token;\n    }\n\n    if (nextProps.token && !nextProps.authUser) {\n      this.props.getUser();\n    }\n  } //////////////////////////////////////////////////////////////////////\n\n\n  componentDidMount() {\n    console.log(\"Comes in app.js's component did mount\");\n    var userToken = window.localStorage.getItem(\"userToken\");\n    if (userToken === \"null\" || userToken === \"\") return;\n\n    if (userToken) {\n      axios.defaults.headers.common['Authorization'] = \"Bearer \" + userToken;\n      this.props.getUser();\n    }\n  }\n\n  handleLogout() {\n    //clear cookie cache\n    window.localStorage.setItem(\"userToken\", null);\n    var url = \"/api/logout\";\n    fetch(url, {\n      method: \"GET\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    }).then(response => {\n      response.json().then(res => {\n        if (res.data === \"success\") {\n          console.log(\"comes to turn off authentication state\");\n          this.setState({\n            isAuthenticated: false\n          });\n        }\n      });\n    }).catch(err => {\n      console.log(\"fails to authenticate app page\");\n      console.log(err);\n    });\n    this.setState({\n      isAuthenticated: false\n    });\n    window.location.reload(false);\n  }\n\n  render() {\n    const customer_id = this.props.customer_id;\n    const items = [];\n    var userRole = window.localStorage.getItem(\"userRole\"); // var userToken = window.localStorage.getItem(\"userToken\");\n\n    return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 7\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 9\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/login\",\n        render: () =>\n        /*#__PURE__*/\n        React.createElement(Login, {\n          openFlag: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 28\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/admin\",\n        render: props => {\n          return customer_id !== undefined && userRole === 'admin' ?\n          /*#__PURE__*/\n          React.createElement(AdminPanel, Object.assign({}, props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 73\n            }\n          })) :\n          /*#__PURE__*/\n          React.createElement(Redirect, {\n            to: {\n              pathname: \"#\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 101\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/signup\",\n        render: props =>\n        /*#__PURE__*/\n        React.createElement(SignUp, Object.assign({}, props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 58\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/resetpass\",\n        render: props =>\n        /*#__PURE__*/\n        React.createElement(ResetPassword, Object.assign({}, props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 61\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/forgotpass\",\n        render: props =>\n        /*#__PURE__*/\n        React.createElement(ForgotPassword, Object.assign({}, props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 62\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: props =>\n        /*#__PURE__*/\n        React.createElement(HomePage, Object.assign({}, props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 52\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        path: \"/home\",\n        render: props =>\n        /*#__PURE__*/\n        React.createElement(HomePage, Object.assign({}, props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 50\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        path: \"/v2\",\n        render: () =>\n        /*#__PURE__*/\n        React.createElement(MealsPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 43\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        path: \"/v3\",\n        render: () =>\n        /*#__PURE__*/\n        React.createElement(VSMealsPage, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 43\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/grocery\",\n        render: () => {\n          return customer_id !== undefined || customer_id !== 'null' ?\n          /*#__PURE__*/\n          React.createElement(GroceryPage, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 78\n            }\n          }) :\n          /*#__PURE__*/\n          React.createElement(Redirect, {\n            to: {\n              pathname: \"#\"\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 96\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        path: \"/products\",\n        render: props => {\n          return (\n            /*#__PURE__*/\n            React.createElement(ProductsSection, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 20\n              }\n            })\n          );\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/SuggestProduct\",\n        render: props => {\n          console.log(\"Customer Id:\", customer_id);\n          return (\n            /*#__PURE__*/\n            React.createElement(SuggestProduct, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }\n            })\n          );\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/SuggestMeal\",\n        render: props => {\n          console.log(\"Customer Id:\", customer_id);\n          return (\n            /*#__PURE__*/\n            React.createElement(SuggestMeal, {\n              productNames: this.productNames,\n              allMealNames: this.allMealNames,\n              measurements: this.measurements,\n              kitchenUtensils: this.kitchenUtensils,\n              categories: this.categories,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }\n            }) // (customer_id !== undefined) ? <SuggestMeal /> : <Redirect to={{ pathname: \"#\" }} /> )\n\n          );\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Route, {\n        exact: true,\n        path: \"/ViewSuggestedMeals\",\n        render: props =>\n        /*#__PURE__*/\n        React.createElement(ViewSuggestedMeals, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 71\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }\n      })),\n      /*#__PURE__*/\n      React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 9\n        }\n      }))\n    );\n  }\n\n} // export default App;\n\n\nconst mapStateToProps = ({\n  auth\n}) => {\n  // const { authUser, token, initURL } = auth;\n  const authUser = auth.authUser,\n        token = auth.token,\n        role = auth.role,\n        customer_id = auth.customer_id;\n  return {\n    authUser,\n    role,\n    token,\n    customer_id\n  };\n};\n\nconst mapDispatchToProps = {\n  setInitUrl,\n  getUser\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/chuka/joe/ChopChowSD/client/src/App.js"],"names":["React","Component","Header","Footer","Route","Switch","Redirect","HomePage","MealsPage","VSMealsPage","ProductsSection","Login","GroceryPage","SignUp","ForgotPassword","ResetPassword","SuggestMeal","SuggestProduct","ViewSuggestedMeals","AdminPanel","setInitUrl","getUser","connect","axios","require","config","App","constructor","props","allMealNames","productNames","productImageLink","categories","measurements","kitchenUtensils","availableLocations","groceryList","locationAddressComponent","handleLogout","bind","state","suggestMealPopOver","isAuthenticated","customerId","componentWillReceiveProps","nextProps","token","defaults","headers","common","authUser","componentDidMount","console","log","userToken","window","localStorage","getItem","setItem","url","fetch","method","credentials","then","response","json","res","data","setState","catch","err","location","reload","render","customer_id","items","userRole","undefined","pathname","mapStateToProps","auth","role","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Header from \"./components/Header/Header\";\nimport Footer from \"./components/Footer\";\n\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport HomePage from \"./components/HomePage\";\nimport MealsPage from \"./components/mealsPage/MealsPage\";\nimport VSMealsPage from \"./components/vsm2/VSMealsPage\";\n\nimport ProductsSection from \"./components/productsPage/ProductsPage\";\nimport Login from \"./components/Login\";\nimport GroceryPage from \"./components/GroceryPage\";\n// import ProductFullDetail from \"./components/ProductFullDetail/ProductFullDetail\";\nimport SignUp from \"./components/signup\";\nimport ForgotPassword from \"./components/forgotpassword\";\nimport ResetPassword from \"./components/resetpassword\";\nimport SuggestMeal from \"./components/SuggestMeal\";\nimport SuggestProduct from \"./components/SuggestProduct\";\nimport ViewSuggestedMeals from \"./components/ViewSuggestedMeals\";\nimport AdminPanel from \"./components/AdminPanel/AdminPanel\";\nimport { setInitUrl, getUser } from \"./actions\";\nimport { connect } from 'react-redux';\nimport axios from './util/Api';\nrequire(\"dotenv\").config();\n\n\n\n\nclass App extends Component {\n  allMealNames = [];\n  productNames = [\"Spinach\", \"Brown Beans\", \"Ijebu Garri\", \"Honey Beans\", \"Kale\", \"Water\",\n    \"Squash Potatoes\", \"Oregano\", \"Cashews\", \"Palm Oil\", \"Pineapple\", \"Onions\", \"Flour\",\n    \"Butter\", \"Sugar\", \"Hawaiian Bread\", \"Avocados\", \"Tomatoes\"];\n  productImageLink = [];\n  categories = [\"Baking\", \"Cooking\", \"Home\", \"Ethiopian\", \"Quick-Meal\"];\n  measurements = [\"mL\", \"oz\", \"L\", \"cup(s)\", \"Tbsp\", \"tsp\", \"pt\", \"lb\", \"g\", \"kg\", \"lb\", \"qt\",\n    \"gallon\", \"dash/pinch\", \"Leaves\", \"cloves\", \"cubes\", \"Large\", \"medium\", \"small\"];\n  kitchenUtensils = [\"Baking Sheet\", \"Colander\", \"Cooking Oil\", \"Cutting Board\",\n    \"Fridge\", \"Knife Set\", \"Mixing Bowls\", \"Pot\", \"Pan\", \"Peeler\", \"Thermometer\",\n    \"Wire Mesh\", \"Zester\"];\n  // productDisplayBooleansOutOfState = [];\n  availableLocations = [\"African Carribean Market\", \"Abule\", \"Scotch Bonnet Restaurant\", \"Ralphs\", \"Target\", \"Walmart\", \"Vons\"];\n\n\n  groceryList = [];\n  locationAddressComponent = [];\n\n  constructor(props) {\n    super(props);\n    this.handleLogout = this.handleLogout.bind(this);\n\n    this.state = {\n      suggestMealPopOver: false,\n      isAuthenticated: false,\n      customerId: null,\n    };\n  }\n\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.token) {\n      axios.defaults.headers.common['Authorization'] = \"Bearer \" + nextProps.token;\n    }\n\n    if (nextProps.token && !nextProps.authUser) {\n      this.props.getUser();\n    }\n    \n  }\n\n  //////////////////////////////////////////////////////////////////////\n  componentDidMount() {\n    console.log(\"Comes in app.js's component did mount\");\n    var userToken = window.localStorage.getItem(\"userToken\");\n\n    if (userToken === \"null\" || userToken===\"\") return;\n\n    if (userToken) {\n      axios.defaults.headers.common['Authorization'] = \"Bearer \" + userToken;\n      this.props.getUser();\n    }\n  }\n\n \n  handleLogout() {\n    //clear cookie cache\n    window.localStorage.setItem(\"userToken\", null);\n    var url = \"/api/logout\";\n    fetch(url, {\n      method: \"GET\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n    })\n      .then((response) => {\n        response.json().then((res) => {\n          if (res.data === \"success\") {\n            console.log(\"comes to turn off authentication state\");\n            this.setState({ isAuthenticated: false });\n          }\n        });\n      })\n      .catch((err) => {\n        console.log(\"fails to authenticate app page\");\n        console.log(err);\n      });\n\n    this.setState({ isAuthenticated: false });\n    window.location.reload(false);\n  }\n\n  render() {\n    const { customer_id } = this.props;\n    const items = [];\n    var userRole = window.localStorage.getItem(\"userRole\");\n    // var userToken = window.localStorage.getItem(\"userToken\");\n\n    return (\n      <div>\n        <Header />\n        <Switch>\n          <Route exact path=\"/login\"\n            render={() => (<Login openFlag={true} />)}\n          />\n          <Route exact path=\"/admin\" render={(props) => {\n            return ((customer_id !== undefined) && userRole==='admin' ? <AdminPanel {...props} /> : <Redirect to={{ pathname: \"#\" }} />)\n          }} />\n          <Route exact path=\"/signup\" render={(props) => <SignUp {...props} />} />\n          <Route exact path=\"/resetpass\" render={(props) => <ResetPassword {...props} />} />\n          <Route exact path=\"/forgotpass\" render={(props) => <ForgotPassword {...props} />} />\n          {/* <Route exact path=\"/\" render={(props) => (\n            <div>\n              <div id=\"title\"><b>Meals</b></div>\n              <div className=\"container\">\n                <div className=\"row\">{items}</div>\n              </div>\n            </div>\n          )}\n          /> */}\n          <Route exact path=\"/\" render={(props) => <HomePage {...props} />} />\n\n          {/* <Route path=\"/home\" render={() => (customer_id !== undefined) ? <HomePage /> : (<Redirect to={{ pathname: \"#\" }} />)} /> */}\n          <Route path=\"/home\" render={(props) => <HomePage {...props} />} />\n\n          <Route path=\"/v2\" render={() => <MealsPage />} />\n          <Route path=\"/v3\" render={() => <VSMealsPage />} />\n\n          <Route exact path=\"/grocery\" render={() => {           \n            return ((customer_id !== undefined || customer_id !== 'null' ) ? <GroceryPage /> : <Redirect to={{ pathname: \"#\" }} />)\n          }}/>\n\n          <Route path=\"/products\" render={(props) => {\n            return <ProductsSection />\n          }} />\n          <Route exact path=\"/SuggestProduct\" render={(props) => \n            {\n              console.log(\"Customer Id:\", customer_id)\n              return(\n                <SuggestProduct/> \n              )\n            }}/>\n          <Route exact path=\"/SuggestMeal\" render={(props) => \n            {\n              console.log(\"Customer Id:\", customer_id)\n              return(\n                <SuggestMeal productNames={this.productNames} allMealNames={this.allMealNames} \n                measurements={this.measurements} kitchenUtensils={this.kitchenUtensils} \n                categories={this.categories}/> \n              // (customer_id !== undefined) ? <SuggestMeal /> : <Redirect to={{ pathname: \"#\" }} /> )\n              )\n            }}/>\n          {/* <Route exact path=\"/ViewSuggestedMeals\" render={(props) => ((customer_id !== undefined) && (userRole === \"admin\")) ? <ViewSuggestedMeals /> : (<Redirect to={{ pathname: \"#\" }} />)} /> */}\n          <Route exact path=\"/ViewSuggestedMeals\" render={(props) =>  <ViewSuggestedMeals /> } />\n          {/* <Route path=\"/product-detail/:customerId/:productId\" render={(props) => (customer_id !== undefined) ? <ProductFullDetail /> : (<Redirect to={{ pathname: \"#\" }} />)} /> */}\n          {/* <Route path=\"/product-detail/:customerId/:productId\" component={ProductFullDetail} /> */}\n        </Switch>\n        <Footer />\n      </div>\n    );\n  }\n}\n// export default App;\n\nconst mapStateToProps = ({ auth }) => {\n  // const { authUser, token, initURL } = auth;\n  const { authUser, token, role, customer_id } = auth;\n  return { authUser, role, token, customer_id }\n};\nconst mapDispatchToProps = { setInitUrl, getUser };\nexport default connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}