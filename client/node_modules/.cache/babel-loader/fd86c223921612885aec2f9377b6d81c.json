{"ast":null,"code":"var _jsxFileName = \"/home/chuka/joe/ChopChowSD/client/src/components/GroceryPage/index.jsx\";\nimport React from \"react\";\nimport \"./style.css\";\nimport PageTitle from \"../CommonComponents/PageTitle\";\nimport { Spinner } from \"react-bootstrap\";\nimport { Container, Alert, Card, Col, Row, Button } from \"react-bootstrap\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport ProductDetail from './ProductDetail/ProductModal';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\";\nimport axios from '../../util/Api'; //////////////////////////////////////////////////////////////////////\n\nclass GroceryPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this._isMounted = false;\n    this.products = [];\n    this.productNamesForTypeahead = new Map();\n    this.state = {\n      customerList: null,\n      Authentication: false,\n      customerId: null,\n      email: \"\",\n      password: \"\",\n      messageErr: false,\n      messageSuccess: false,\n      messageErrCreate: false,\n      showAlert: false,\n      messageAlert: \"\",\n      variant: \"\",\n      productID: \"\",\n      deletedItemId: null,\n      selectedProduct: null,\n      idsItems: null,\n      deletedItemsId: null,\n      lasIdListState: null,\n      valueProductName: \"\",\n      valueProductImage: \"\",\n      valueProductPrice: \"\",\n      valueProductSize: \"\",\n      valuePricePerOunce: \"\",\n      errormsg: \"\",\n      typeAheadAdded: false,\n      product_img: null,\n      product_name: \"\",\n      product_modal_flg: false\n    };\n\n    this.handleChange = ({\n      target: {\n        value,\n        name\n      }\n    }) => this.setState({\n      [name]: value\n    });\n\n    this.handleProductClick = (_img, _name, productID, flag) => {\n      if (flag) {\n        this.setState({\n          product_img: \"/images/products/\".concat(_img),\n          product_name: _name,\n          product_modal_flg: true,\n          productID: productID\n        });\n      } else {\n        this.setState({\n          product_img: _img,\n          product_name: _name,\n          product_modal_flg: true,\n          productID: productID\n        });\n      }\n    };\n\n    this.onCloseClicked = () => {\n      this.setState({\n        product_modal_flg: false\n      });\n    };\n\n    this.getCustomerList = customerId => {\n      var url = \"/getCustomerGroceryList/\".concat(customerId); // var url = `http://localhost:5000/api/getCustomerGroceryList/${customerId}`\n      // var url = `https://chopchowdev.herokuapp.com/api/getCustomerGroceryList/${customerId}`;\n\n      axios(url).then(({\n        data\n      }) => {\n        this.setState({\n          customerList: data.data\n        });\n      }).catch(() => {\n        this.setState({\n          messageAlert: \"Authentication Error while fetching your grocery list...\",\n          showAlert: true,\n          variant: \"danger\"\n        }, () => setTimeout(() => {\n          this.setState({\n            messageAlert: \"\",\n            showAlert: false\n          });\n        }, 8000));\n      });\n    };\n\n    this.handleShowDeleteItem = productID => {\n      this.setState({\n        deletedItemId: productID\n      });\n      const _this$state = this.state,\n            customerId = _this$state.customerId,\n            deletedItemId = _this$state.deletedItemId; // var url = `https://chopchowdev.herokuapp.com/api/remove-item/${productID}/${customerId}`\n\n      var url = \"./api/remove-item/\".concat(productID, \"/\").concat(customerId);\n      fetch(url, {\n        method: \"DELETE\" // headers: {\n        //   Accept: 'application/json',\n        //   'Content-Type': 'application/json',\n        // },\n\n      }).then(res => {\n        return res.json();\n      }).then(response => {\n        this.setState({\n          messageAlert: \"deleted successfully\",\n          showAlert: true,\n          variant: \"success\"\n        }, () => setTimeout(() => {\n          this.setState({\n            messageAlert: \"\",\n            showAlert: false\n          });\n        }, 3500));\n        this.setState(prevState => {\n          // delete item on client side\n          const newValueData = prevState.customerList.filter( // do we need catch sttmnt for filter\n          item => item.id !== deletedItemId);\n          return {\n            customerList: newValueData\n          };\n        });\n        console.log(\"Delets item\");\n        this.componentDidMount();\n      }).catch(() => {\n        this.setState({\n          messageAlert: \"Internal Server Error while deleting item\",\n          showAlert: true,\n          variant: \"danger\"\n        }, () => setTimeout(() => {\n          this.setState({\n            messageAlert: \"\",\n            showAlert: false\n          });\n        }, 8000));\n      });\n    };\n\n    this.handleDeleteList = () => {\n      console.log(\"Comes in deletes list\");\n      const customerId = this.state.customerId;\n      var url = \"https://chopchowdev.herokuapp.com/api/remove-list/\".concat(customerId); // var url = `./api/remove-list/${customerId}`\n\n      fetch(url, {\n        method: \"DELETE\" // headers: {\n        //   'Content-Type': 'application/json',\n        // }\n\n      }).then(response => {\n        console.log(\"delete response is: \");\n        console.log(response);\n        console.log(response.json);\n        this.setState({\n          messageAlert: \"deleted successfully\",\n          showAlert: true,\n          variant: \"success\"\n        }, () => setTimeout(() => {\n          this.setState({\n            messageAlert: \"\",\n            showAlert: false\n          });\n        }, 3500));\n        this.setState({\n          customerList: []\n        });\n        this.componentDidMount();\n        console.log(\"deletes list\");\n        return response.json();\n      }).catch(() => {\n        console.log(\"caught an error while deleting list\");\n        this.setState({\n          messageAlert: \"Internal Server Error while deleting list\",\n          showAlert: true,\n          variant: \"danger\"\n        }, () => setTimeout(() => {\n          this.setState({\n            messageAlert: \"\",\n            showAlert: false\n          });\n        }, 8000));\n      });\n    };\n\n    this.handleClickTypeahead = selected => {\n      this.setState({\n        selectedProduct: selected\n      }); // var arrayOfProductNames = Array.from(this.productNamesForTypeahead.keys());\n\n      this.productNamesForTypeahead.get(selected); // var index = arrayOfProductNames.findIndex((el) => el === selected[0]);\n\n      var productID = this.productNamesForTypeahead.get(selected[0]);\n      console.log(\"productID is: \" + productID);\n      console.log(\"customer id is: \" + this.state.customerId);\n\n      if (!isNaN(productID)) {\n        // var url = `https://chopchowdev.herokuapp.com/api/addTypeaheadDataToCustomerGroceryList/${productID}/${this.state.customerId}`\n        var url = \"./api/addTypeaheadDataToCustomerGroceryList/\".concat(productID, \"/\").concat(this.state.customerId);\n        fetch(url, {\n          method: \"POST\"\n        }).then(response => {\n          if (response) {\n            this.setState({\n              messageAlert: \"product added successfully\",\n              showAlert: true,\n              variant: \"success\"\n            }, () => setTimeout(() => {\n              this.setState({\n                messageAlert: \"\",\n                showAlert: false\n              });\n            }, 3500));\n            console.log(\"Comes in handleClickTypeahead's then on client side\");\n            this.componentDidMount();\n          }\n        });\n      }\n    };\n  }\n\n  //////////////////////////////////////////////////////////////////////\n  componentDidMount() {\n    this._isMounted = true;\n\n    if (this._isMounted) {\n      const _this$props = this.props,\n            authUser = _this$props.authUser,\n            customer_id = _this$props.customer_id;\n      this.setState({\n        Authentication: authUser\n      });\n      this.setState({\n        customerId: customer_id\n      });\n      this.getCustomerList(customer_id);\n    }\n  } //////////////////////////////////////////////////////////////////////\n\n\n  componentWillReceiveProps(nextProps) {\n    // checks if user is already logged in in app.\n    const authUser = nextProps.authUser,\n          customer_id = nextProps.customer_id;\n    this.setState({\n      Authentication: authUser\n    });\n\n    if (authUser !== null) {\n      this.setState({\n        customerId: customer_id\n      });\n      this.getCustomerList(customer_id);\n    }\n  } //////////////////////////////////////////////////////////////////////\n\n\n  //////////////////////////////////////////////////////////////////////\n  render() {\n    const _this$state2 = this.state,\n          showAlert = _this$state2.showAlert,\n          variant = _this$state2.variant,\n          messageAlert = _this$state2.messageAlert,\n          customerList = _this$state2.customerList;\n    console.log(\"Authentication, \", this.state.Authentication);\n    console.log(\"customerId, \", this.state.customerId);\n    console.log(\"customerList, \", this.state.customerList);\n    console.log(\"Props:\", this.props);\n    return (\n      /*#__PURE__*/\n      React.createElement(React.Fragment, null,\n      /*#__PURE__*/\n      React.createElement(Typeahead // multiple\n      , {\n        options: Array.from(this.productNamesForTypeahead.keys()),\n        placeholder: \"Add products to your grocery list here..\",\n        id: \"typeahead\",\n        onChange: selected => {\n          this.handleClickTypeahead(selected);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 9\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Alert, {\n        show: showAlert,\n        key: 1,\n        variant: variant,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 9\n        }\n      }, messageAlert),\n      /*#__PURE__*/\n      React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 9\n        }\n      }, \"Your Grocery Cart\"), this.state.messageVisible ?\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }\n      }, \"you can not add in this item because it is already in customers grocery list\") : null, this.state.Authentication ?\n      /*#__PURE__*/\n      React.createElement(React.Fragment, null,\n      /*#__PURE__*/\n      React.createElement(PageTitle, {\n        title: \" Your Grocery List\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }\n      },\n      /*#__PURE__*/\n      React.createElement(Button, {\n        className: \"yourlist__buttonDeleteList\",\n        variant: \"danger\",\n        onClick: e => {\n          e.stopPropagation();\n          this.handleDeleteList();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 15\n        }\n      }, \"Delete List Items\"),\n      /*#__PURE__*/\n      React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 15\n        }\n      }),\n      /*#__PURE__*/\n      React.createElement(Container, {\n        className: \"page__container\",\n        fluid: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 15\n        }\n      }, customerList ? customerList.map(customer_grocery_product_item => {\n        let productID = customer_grocery_product_item.id;\n        console.log(\"customer_grocery_product_item:\", customer_grocery_product_item.product_image);\n        return (\n          /*#__PURE__*/\n          // <>\n          React.createElement(Row, {\n            display: \"inline-flex\",\n            key: customer_grocery_product_item.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 23\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Col, {\n            key: customer_grocery_product_item.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 25\n            }\n          }, customer_grocery_product_item.product_image.startsWith('https://') ?\n          /*#__PURE__*/\n          React.createElement(\"img\", {\n            src: customer_grocery_product_item.product_image,\n            alt: \"product_img \",\n            className: \"card-img\",\n            onClick: () => this.handleProductClick(customer_grocery_product_item.product_image, customer_grocery_product_item.product_name, productID, false),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 31\n            }\n          }) :\n          /*#__PURE__*/\n          React.createElement(\"img\", {\n            src: \"/images/products/\".concat(customer_grocery_product_item.product_image),\n            alt: \"product_img \",\n            className: \"card-img\",\n            onClick: () => this.handleProductClick(customer_grocery_product_item.product_image, customer_grocery_product_item.product_name, productID, true),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 31\n            }\n          })),\n          /*#__PURE__*/\n          React.createElement(Col, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 25\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Card.Title, {\n            className: \"grocery_item_card-header\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 27\n            }\n          }, \"Product Name :\", \" \", customer_grocery_product_item.product_name),\n          /*#__PURE__*/\n          React.createElement(Card.Text, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 27\n            }\n          }, \"Product Price :\", \" \", customer_grocery_product_item && customer_grocery_product_item.product_price,\n          /*#__PURE__*/\n          React.createElement(\"br\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 29\n            }\n          }), \"Product Size : \", customer_grocery_product_item.sizes)),\n          /*#__PURE__*/\n          React.createElement(Col, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 25\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(Button, {\n            onClick: e => {\n              e.stopPropagation();\n              this.handleAddItemToCart(productID);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 27\n            }\n          }, \" \", \"  Add To Cart\")),\n          /*#__PURE__*/\n          React.createElement(Col, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 25\n            }\n          },\n          /*#__PURE__*/\n          React.createElement(\"i\", {\n            className: \"fa fa-remove\",\n            onClick: e => {\n              e.stopPropagation();\n              this.handleShowDeleteItem(customer_grocery_product_item.id);\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 27\n            }\n          })))\n        );\n      }) :\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 21\n        }\n      }, \" Your grocery cart looks empty.\",\n      /*#__PURE__*/\n      React.createElement(Spinner, {\n        animation: \"border\",\n        variant: \"info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 23\n        }\n      }))))) :\n      /*#__PURE__*/\n      React.createElement(React.Fragment, null,\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 15\n        }\n      }, \"Log into to view your saved grocery list.\")), this.state.product_modal_flg &&\n      /*#__PURE__*/\n      React.createElement(ProductDetail, {\n        state: this.state,\n        onCloseClicked: this.onCloseClicked,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }\n      }))\n    );\n  }\n\n}\n\nconst mapStateToProps = ({\n  auth\n}) => {\n  const authUser = auth.authUser,\n        role = auth.role,\n        customer_id = auth.customer_id;\n  return {\n    authUser,\n    role,\n    customer_id\n  };\n};\n\nexport default connect(mapStateToProps, () => ({}))(withRouter(GroceryPage));","map":{"version":3,"sources":["/home/chuka/joe/ChopChowSD/client/src/components/GroceryPage/index.jsx"],"names":["React","PageTitle","Spinner","Container","Alert","Card","Col","Row","Button","Typeahead","ProductDetail","connect","withRouter","axios","GroceryPage","Component","_isMounted","products","productNamesForTypeahead","Map","state","customerList","Authentication","customerId","email","password","messageErr","messageSuccess","messageErrCreate","showAlert","messageAlert","variant","productID","deletedItemId","selectedProduct","idsItems","deletedItemsId","lasIdListState","valueProductName","valueProductImage","valueProductPrice","valueProductSize","valuePricePerOunce","errormsg","typeAheadAdded","product_img","product_name","product_modal_flg","handleChange","target","value","name","setState","handleProductClick","_img","_name","flag","onCloseClicked","getCustomerList","url","then","data","catch","setTimeout","handleShowDeleteItem","fetch","method","res","json","response","prevState","newValueData","filter","item","id","console","log","componentDidMount","handleDeleteList","handleClickTypeahead","selected","get","isNaN","props","authUser","customer_id","componentWillReceiveProps","nextProps","render","Array","from","keys","messageVisible","e","stopPropagation","map","customer_grocery_product_item","product_image","startsWith","product_price","sizes","handleAddItemToCart","mapStateToProps","auth","role"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./style.css\";\nimport PageTitle from \"../CommonComponents/PageTitle\";\nimport { Spinner } from \"react-bootstrap\";\nimport { Container, Alert, Card, Col, Row, Button } from \"react-bootstrap\";\nimport { Typeahead } from \"react-bootstrap-typeahead\";\nimport ProductDetail from './ProductDetail/ProductModal'\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\";\nimport axios from '../../util/Api';\n\n//////////////////////////////////////////////////////////////////////\nclass GroceryPage extends React.Component {\n  // Mongo\n  _isMounted = false;\n  products = [];\n  productNamesForTypeahead = new Map();\n\n  state = {\n    customerList: null,\n    Authentication: false,\n    customerId: null,\n    email: \"\",\n    password: \"\",\n\n    messageErr: false,\n    messageSuccess: false,\n    messageErrCreate: false,\n    showAlert: false,\n    messageAlert: \"\",\n\n    variant: \"\",\n    productID: \"\",\n    deletedItemId: null,\n    selectedProduct: null,\n    idsItems: null,\n    deletedItemsId: null,\n    lasIdListState: null,\n    valueProductName: \"\",\n    valueProductImage: \"\",\n    valueProductPrice: \"\",\n    valueProductSize: \"\",\n    valuePricePerOunce: \"\",\n    errormsg: \"\",\n    typeAheadAdded: false,\n\n    product_img: null,\n    product_name:\"\",\n    product_modal_flg :false,\n  };\n\n  //////////////////////////////////////////////////////////////////////\n  handleChange = ({ target: { value, name } }) =>\n    this.setState({ [name]: value });\n\n  //////////////////////////////////////////////////////////////////////\n  handleProductClick = (_img, _name,productID, flag) =>{\n    if(flag){\n      this.setState({ product_img: `/images/products/${_img}`, product_name: _name, product_modal_flg:true , productID: productID});\n    }else{\n      this.setState({ product_img: _img, product_name: _name , product_modal_flg:true, productID: productID});\n    }\n  }\n  onCloseClicked = () => {\n    this.setState({ product_modal_flg: false });\n  }\n\n//////////////////////////////////////////////////////////////////////\n  componentDidMount() {\n    this._isMounted = true;\n\n    if (this._isMounted) {\n      const { authUser, customer_id } = this.props;\n      this.setState({ Authentication: authUser });\n      this.setState({ customerId: customer_id });\n      this.getCustomerList(customer_id);\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////\n  componentWillReceiveProps(nextProps) {\n    // checks if user is already logged in in app.\n    const { authUser, customer_id } = nextProps;\n    this.setState({ Authentication: authUser });\n\n    if (authUser !== null) {\n      this.setState({ customerId: customer_id });\n      this.getCustomerList(customer_id);\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////\n  getCustomerList = (customerId) => {\n    var url = `/getCustomerGroceryList/${customerId}`;\n    // var url = `http://localhost:5000/api/getCustomerGroceryList/${customerId}`\n    // var url = `https://chopchowdev.herokuapp.com/api/getCustomerGroceryList/${customerId}`;\n    axios(url)\n      .then(({data}) => {\n        this.setState({ customerList: data.data });\n      })      \n      .catch(() => {\n        this.setState(\n          {\n            messageAlert:\"Authentication Error while fetching your grocery list...\",\n            showAlert: true,\n            variant: \"danger\",\n          },\n          () =>\n            setTimeout(() => {\n              this.setState({ messageAlert: \"\", showAlert: false });\n            }, 8000)\n        );\n      });    \n  };\n\n  //////////////////////////////////////////////////////////////////////\n  handleShowDeleteItem = (productID) => {\n    this.setState({ deletedItemId: productID });\n    const { customerId, deletedItemId } = this.state;\n    // var url = `https://chopchowdev.herokuapp.com/api/remove-item/${productID}/${customerId}`\n    var url = `./api/remove-item/${productID}/${customerId}`;\n\n    fetch(url, {\n      method: \"DELETE\",\n      // headers: {\n      //   Accept: 'application/json',\n      //   'Content-Type': 'application/json',\n      // },\n    })\n      .then((res) => {\n        return res.json();\n      })\n      .then((response) => {\n        this.setState(\n          {\n            messageAlert: \"deleted successfully\",\n            showAlert: true,\n            variant: \"success\",\n          },\n          () =>\n            setTimeout(() => {\n              this.setState({ messageAlert: \"\", showAlert: false });\n            }, 3500)\n        );\n        this.setState((prevState) => {\n          // delete item on client side\n          const newValueData = prevState.customerList.filter(\n            // do we need catch sttmnt for filter\n            (item) => item.id !== deletedItemId\n          );\n          return { customerList: newValueData };\n        });\n        console.log(\"Delets item\");\n        this.componentDidMount();\n      })\n      .catch(() => {\n        this.setState(\n          {\n            messageAlert: \"Internal Server Error while deleting item\",\n            showAlert: true,\n            variant: \"danger\",\n          },\n          () =>\n            setTimeout(() => {\n              this.setState({ messageAlert: \"\", showAlert: false });\n            }, 8000)\n        );\n      });\n  };\n\n  //////////////////////////////////////////////////////////////////////\n  handleDeleteList = () => {\n    console.log(\"Comes in deletes list\");\n    const { customerId } = this.state;\n    var url = `https://chopchowdev.herokuapp.com/api/remove-list/${customerId}`;\n    // var url = `./api/remove-list/${customerId}`\n\n    fetch(url, {\n      method: \"DELETE\",\n      // headers: {\n      //   'Content-Type': 'application/json',\n      // }\n    })\n      .then((response) => {\n        console.log(\"delete response is: \");\n        console.log(response);\n        console.log(response.json);\n        this.setState(\n          {\n            messageAlert: \"deleted successfully\",\n            showAlert: true,\n            variant: \"success\",\n          },\n          () =>\n            setTimeout(() => {\n              this.setState({ messageAlert: \"\", showAlert: false });\n            }, 3500)\n        );\n\n        this.setState({ customerList: [] });\n        this.componentDidMount();\n        console.log(\"deletes list\");\n        return response.json();\n      })\n      .catch(() => {\n        console.log(\"caught an error while deleting list\");\n        this.setState(\n          {\n            messageAlert: \"Internal Server Error while deleting list\",\n            showAlert: true,\n            variant: \"danger\",\n          },\n          () =>\n            setTimeout(() => {\n              this.setState({ messageAlert: \"\", showAlert: false });\n            }, 8000)\n        );\n      });\n  };\n\n  //////////////////////////////////////////////////////////////////////\n  handleClickTypeahead = (selected) => {\n    this.setState({ selectedProduct: selected });\n    // var arrayOfProductNames = Array.from(this.productNamesForTypeahead.keys());\n    this.productNamesForTypeahead.get(selected);\n\n    // var index = arrayOfProductNames.findIndex((el) => el === selected[0]);\n    var productID = this.productNamesForTypeahead.get(selected[0]);\n    console.log(\"productID is: \" + productID);\n    console.log(\"customer id is: \" + this.state.customerId);\n    if (!isNaN(productID)) {\n      // var url = `https://chopchowdev.herokuapp.com/api/addTypeaheadDataToCustomerGroceryList/${productID}/${this.state.customerId}`\n      var url = `./api/addTypeaheadDataToCustomerGroceryList/${productID}/${this.state.customerId}`;\n      fetch(url, {\n        method: \"POST\",\n      }).then((response) => {\n        if (response) {\n          this.setState(\n            {\n              messageAlert: \"product added successfully\",\n              showAlert: true,\n              variant: \"success\",\n            },\n            () =>\n              setTimeout(() => {\n                this.setState({ messageAlert: \"\", showAlert: false });\n              }, 3500)\n          );\n          console.log(\"Comes in handleClickTypeahead's then on client side\");\n          this.componentDidMount();\n        }\n      });\n    }\n  };\n\n  //////////////////////////////////////////////////////////////////////\n  render() {\n    const { showAlert, variant, messageAlert, customerList } = this.state;\n\n    console.log(\"Authentication, \", this.state.Authentication);\n    console.log(\"customerId, \", this.state.customerId);\n    console.log(\"customerList, \", this.state.customerList);\n\n    console.log(\"Props:\", this.props)\n  \n\n    return (\n      <>\n        <Typeahead\n          // multiple\n          options={Array.from(this.productNamesForTypeahead.keys())}\n          placeholder=\"Add products to your grocery list here..\"\n          id=\"typeahead\"\n          onChange={(selected) => {\n            this.handleClickTypeahead(selected);\n          }}\n        />\n\n        {/* Display alert if there is any issue loading grocery page */}\n        <Alert show={showAlert} key={1} variant={variant}>\n          {messageAlert}\n        </Alert>\n\n\n        <h2>Your Grocery Cart</h2>\n\n\n        {this.state.messageVisible ? (\n          <div>\n            you can not add in this item because it is already in customers\n            grocery list\n          </div>\n        ) : null}\n        {this.state.Authentication ? (\n          <>\n          <PageTitle title=\" Your Grocery List\" />\n            <div>\n              <Button\n                  className=\"yourlist__buttonDeleteList\"\n                  variant=\"danger\"\n                  onClick={(e) => { e.stopPropagation(); this.handleDeleteList();}}>\n                  Delete List Items\n              </Button>\n\n              <br></br>\n              <Container className=\"page__container\" fluid>\n                {/* display grocery list, for any authenticated customer */}\n                {\n                customerList ? (\n                  customerList.map((customer_grocery_product_item) => {\n                    let productID = customer_grocery_product_item.id;\n                    console.log(\"customer_grocery_product_item:\", customer_grocery_product_item.product_image)\n                    return (\n                      // <>\n                      <Row display=\"inline-flex\" key = {customer_grocery_product_item.id} >\n                        <Col key={customer_grocery_product_item.id}>\n                          {/* check for private or public images (can be used for suggest meal) */}\n                          {customer_grocery_product_item.product_image.startsWith('https://') ? (\n                              <img\n                                src={customer_grocery_product_item.product_image}\n                                alt=\"product_img \"\n                                className=\"card-img\"\n                                onClick = {() => this.handleProductClick(customer_grocery_product_item.product_image, customer_grocery_product_item.product_name, productID, false)}\n                              />\n                            ) : (\n                              <img\n                                src={`/images/products/${customer_grocery_product_item.product_image}`}\n                                alt=\"product_img \"\n                                className=\"card-img\"\n                                onClick = {() => this.handleProductClick(customer_grocery_product_item.product_image, customer_grocery_product_item.product_name, productID, true)}\n                              />\n                            )}\n                        </Col>\n\n                        <Col>\n                          <Card.Title className=\"grocery_item_card-header\">\n                            Product Name :{\" \"}\n                            {customer_grocery_product_item.product_name}\n                          </Card.Title>\n                          <Card.Text>\n                            Product Price :{\" \"}\n                            {customer_grocery_product_item &&\n                              customer_grocery_product_item.product_price}\n                            <br></br>\n                            Product Size : {customer_grocery_product_item.sizes}\n                          </Card.Text>\n                        </Col>\n\n                        <Col>\n                          <Button onClick={(e) => { e.stopPropagation(); this.handleAddItemToCart(productID);  }} >\n                            {\" \"}  Add To Cart\n                          </Button>\n                        </Col>\n                        <Col>\n                          <i\n                            className=\"fa fa-remove\"\n                            onClick={(e) => {e.stopPropagation();this.handleShowDeleteItem(\n                                customer_grocery_product_item.id\n                              );\n                            }}\n                          ></i>\n                        </Col>\n                      </Row>\n                    );\n                  })\n                ) : (\n                    \n                    <div> Your grocery cart looks empty.\n                      <Spinner animation=\"border\" variant=\"info\" />\n                    </div>\n                  )}\n              </Container>\n            </div>\n          </>\n        ) : (\n            <>\n              {/* <Login /> */}\n              <div>\n                Log into to view your saved grocery list.\n            </div>\n            </>\n          )}\n\n\n\n        {\n          this.state.product_modal_flg && \n          <ProductDetail state = { this.state } onCloseClicked={this.onCloseClicked} />\n        }\n      </>\n    );\n  }\n}\nconst mapStateToProps = ({ auth }) => {\n  const { authUser, role, customer_id } = auth;\n  return { authUser, role, customer_id }\n};\n\nexport default connect(mapStateToProps, ()=>({}))(withRouter(GroceryPage));"]},"metadata":{},"sourceType":"module"}